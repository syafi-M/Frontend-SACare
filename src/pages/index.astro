---
// src/pages/index.astro
import { actions } from 'astro:actions';

const result = Astro.getActionResult(actions.loginWithGoogle);

if (result?.data && 'success' in result.data && result.data.success) {
    return Astro.redirect('/homepage'); // Best Practice: Gunakan return pada redirect
}
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<link rel="icon" href="/favicon.ico" />
		<meta name="generator" content={Astro.generator} />
		<title>SACare - Login Page</title>
	</head>
	<body bg-neutral-50 h-full w-full m-0 flex items-center justify-center min-h-screen>
    <main 
        flex="~ col items-center justify-start" 
        w="full" max-w-sm mx-auto
        bg-white p-8 rounded-3xl shadow-xl border="~ neutral-100"
    >
        <div text-center mb-8>
            <div mx-auto mb-4 bg-yellow-400 p-3 rounded-2xl shadow-md w-max>
                <!-- Gunakan class standar agar konsisten dengan preset-icons -->
                <div class="i-ph-house-bold text-gray-900 text-3xl"></div>
            </div>
            <h1 text-2xl font-black text-gray-900 tracking-tight>SACare</h1>
            <p text="gray-500 sm" mt-1 font-medium>Layanan rumah profesional</p>
        </div>

        <form method="POST" action={actions.loginWithGoogle} w-full>
            <button 
                type="submit" w-full mb-4 p-3.5 border="~ gray-200" rounded-2xl
                flex="~ items-center justify-center gap-3"
                text="gray-700 sm" font-bold hover:bg-gray-50 transition-all active:scale-95
            >
                <div class="i-logos-google-icon text-lg"></div>
                Lanjutkan dengan Google
            </button>
        </form>

        <div flex="~ items-center" my-6 w-full>
            <div flex-grow border="t gray-200"></div>
            <span mx-4 text="gray-400 [10px]" font-bold uppercase tracking-widest>ATAU EMAIL</span>
            <div flex-grow border="t gray-200"></div>
        </div>

        <form w-full flex="~ col gap-4">
            <input 
                type="email" 
                placeholder="Alamat email" 
                w-full p-3.5 border="~ gray-200" rounded-2xl bg-gray-50
                focus="ring-2 ring-yellow-400 bg-white" outline-none transition-all
            />
            
            <a 
                href="/homepage" 
                w-full p-3.5 rounded-2xl font-bold text="white center sm"
                bg="neutral-900 hover:neutral-800" 
                transition-all shadow-lg active:scale-95
            >
                Masuk
            </a>
        </form>

        <p text="center sm gray-500" mt-8>
            Belum punya akun? 
            <a href="#" text-yellow-600 font-bold hover:underline>Daftar sekarang</a>
        </p>
    </main>
</body>
</html>